syntax = "proto3";

package ninjamagic;

message Msg {
  string text = 1;
}

message Pos {
  uint32 id = 1;
  uint32 map_id = 2;
  int32 x = 3;
  int32 y = 4;
  bool quiet = 5;
}

message Chip {
  uint32 id = 1;
  uint32 map_id = 2;
  uint32 glyph = 3;
  float h = 4;
  float s = 5;
  float v = 6;
  float a = 7;
}

message Tile {
  uint32 map_id = 1;
  int32 top = 2;
  int32 left = 3;
  bytes data = 4;
}

message Gas {
  uint32 id = 1;
  uint32 map_id = 2;
  int32 x = 3;
  int32 y = 4;
  float v = 5;

}

message Glyph {
  uint32 id = 1;
  string glyph = 2;
  float h = 3;
  float s = 4;
  float v = 5;
}

message Noun {
  uint32 id = 1;
  string text = 2;
}

message Health {
  uint32 id = 1;
  float pct = 2;
  float stress_pct = 3;
}

message Stance {
  uint32 id = 1;
  string text = 2;
}

message Condition {
  uint32 id = 1;
  string text = 2;
}

message Skill {
  string name = 1;
  uint32 rank = 2;
  float tnl = 3;
}

message Datetime {
  uint64 seconds = 1;
}

message Prompt {
  string text = 1;
  optional double end = 2;
  optional double server_time = 3;
}

// A wrapper that can contain any of our specific message types.
message Kind {
  oneof body {
    Msg msg = 1;
    Pos pos = 2;
    Chip chip = 3;
    Tile tile = 4;
    Gas gas = 5;
    Glyph glyph = 6;
    Noun noun = 7;
    Health health = 8;
    Stance stance = 9;
    Condition condition = 10;
    Skill skill = 11;
    Datetime datetime = 12;
    Prompt prompt = 13;
  }
}

// The root message, which is a list of individual messages.
message Packet {
  repeated Kind envelope = 1;
}
